
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Developer Guide &#8212; Quadrans Wiki  documentation</title>
    
  <link rel="stylesheet" href="../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/quadrans_style.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Projects" href="../projects/index.html" />
    <link rel="prev" title="Test Contract: Echo" href="test-echo.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../index.html">
    
      <img src="../_static/logo-quadrans-black.svg" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../get-started.html">Get Started</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../nodes/index.html">Nodes</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../wallet/index.html">Wallets</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../cryptocurrencies/index.html">Cryptocurrencies</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="index.html">Programming</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../projects/index.html">Projects</a>
        </li>
        
        
        <li class="nav-item">
            <a class="nav-link nav-external" href="https://quadrans.io">Quadrans Foundation<i class="fas fa-external-link-alt"></i></a>
        </li>
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/quadrans/wiki" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/quadransf" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
        
        
        
        
        
        
        
        
          
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#contributing" class="nav-link">Contributing</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#building-and-testing" class="nav-link">Building and Testing</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#building-executables" class="nav-link">Building Executables</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#testing" class="nav-link">Testing</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#getting-stack-traces" class="nav-link">Getting Stack Traces</a>
        </li>
    
            </ul>
        </li>
    
    </ul>
</nav>



<div class="tocsection editthispage">
    <a href="https://github.com/quadrans/wiki/edit/master/docs/programming/devguide.md">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="developer-guide">
<h1>Developer Guide<a class="headerlink" href="#developer-guide" title="Permalink to this headline">¶</a></h1>
<p><strong>NOTE: These instructions are for people who want to contribute Go source code changes. If you just want to run a Quadrans Node, use the regular <a class="reference internal" href="../nodes/index.html"><span class="doc">Installation Instructions</span></a>.</strong></p>
<p>This document is the entry point for developers of the Go implementation of Quadrans.</p>
<p>Developers here refer to the hands-on: who are interested in build, develop, debug, submit a bug report or pull request or contribute code to go-quadrans.</p>
<div class="section" id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h2>
<p>Thank you for considering to help out with the source code! We welcome contributions from anyone on the internet, and are grateful for even the smallest of fixes!</p>
<p>GitHub is used to track issues and contribute code, suggestions, feature requests or documentation.</p>
<p>If you’d like to contribute to go-quadrans, please fork, fix, commit and send a pull request (PR) for the maintainers to review and merge into the main code base. If you wish to submit more complex changes though, please check up with the core devs in the <a class="reference external" href="https://discord.gg/2bMpuU9Z">Quadrans Discord Server</a> to ensure those changes are in line with the general philosophy of the project and/or get some early feedback.</p>
<p>This can reduce your effort as well as speeding up our review and merge procedures.</p>
<p>PRs need to be based on and opened against the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch (unless by explicit agreement, you contribute to a complex feature branch).</p>
<p>We encourage a PR early approach, meaning you create the PR the earliest even without the fix/feature. This will let core devs and other volunteers know you picked up an issue.</p>
<p>These early PRs should indicate ‘in progress’ status.</p>
</div>
<div class="section" id="building-and-testing">
<h2>Building and Testing<a class="headerlink" href="#building-and-testing" title="Permalink to this headline">¶</a></h2>
<p>We assume that you have Go installed. Please use Go version 1.13 or later. We use the gc toolchain for development, which you can get from the <a class="reference external" href="https://golang.org/doc/install">Go downloads page</a>.</p>
<p>go-quadrans is a Go module, and uses the <a class="reference external" href="https://github.com/golang/go/wiki/Modules">Go modules system</a> to manage dependencies. Using <code class="docutils literal notranslate"><span class="pre">GOPATH</span></code> is not required to build go-ethereum.</p>
<div class="section" id="building-executables">
<h3>Building Executables<a class="headerlink" href="#building-executables" title="Permalink to this headline">¶</a></h3>
<p>Switch to the go-ethereum repository root directory.</p>
<p>You can build all code using the go tool, placing the resulting binary in <code class="docutils literal notranslate"><span class="pre">$GOPATH/bin</span></code>.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>go install -v ./...
</pre></div>
</div>
<p>go-quadrans exectuables can be built individually. To build just geth, use:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>go install -v ./cmd/gqdc
</pre></div>
</div>
<p>If you want to compile geth for an architecture that differs from your host, please consult our <a class="reference internal" href="../nodes/build/cross-compile.html"><span class="doc">cross compilation guide</span></a>.</p>
</div>
<div class="section" id="testing">
<h3>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h3>
<p>Testing a package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">go</span> <span class="n">test</span> <span class="o">-</span><span class="n">v</span> <span class="o">./</span><span class="n">eth</span>
</pre></div>
</div>
<p>Running an individual test:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">go</span> <span class="n">test</span> <span class="o">-</span><span class="n">v</span> <span class="o">./</span><span class="n">eth</span> <span class="o">-</span><span class="n">run</span> <span class="n">TestMethod</span>
</pre></div>
</div>
<p><strong>Note</strong>: here all tests with prefix <em>TestMethod</em> will be run, so if you got TestMethod,
TestMethod1, then both tests will run.</p>
<p>Running benchmarks, eg.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">go</span> <span class="n">test</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">bench</span> <span class="o">.</span> <span class="o">-</span><span class="n">run</span> <span class="n">BenchmarkJoin</span>
</pre></div>
</div>
<p>For more information, see the <a class="reference external" href="https://golang.org/cmd/go/#hdr-Testing_flags">go test flags</a> documentation.</p>
</div>
<div class="section" id="getting-stack-traces">
<h3>Getting Stack Traces<a class="headerlink" href="#getting-stack-traces" title="Permalink to this headline">¶</a></h3>
<p>If <code class="docutils literal notranslate"><span class="pre">geth</span></code> is started with the <code class="docutils literal notranslate"><span class="pre">--pprof</span></code> option, a debugging HTTP server is made available
on port 6060. You can bring up <a class="reference external" href="http://localhost:6060/debug/pprof">http://localhost:6060/debug/pprof</a> to see the heap,
running routines etc. By clicking “full goroutine stack dump” you can generate a trace
that is useful for debugging.</p>
<p>Note that if you run multiple instances of <code class="docutils literal notranslate"><span class="pre">geth</span></code>, this port will only work for the first
instance that was launched. If you want to generate stacktraces for these other instances,
you need to start them up choosing an alternative pprof port. Make sure you are
redirecting stderr to a logfile.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geth</span> <span class="o">-</span><span class="n">port</span><span class="o">=</span><span class="mi">30300</span> <span class="o">-</span><span class="n">verbosity</span> <span class="mi">5</span> <span class="o">--</span><span class="n">pprof</span> <span class="o">--</span><span class="n">pprof</span><span class="o">.</span><span class="n">port</span> <span class="mi">6060</span> <span class="mi">2</span><span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="mf">00.</span><span class="n">glog</span>
<span class="n">geth</span> <span class="o">-</span><span class="n">port</span><span class="o">=</span><span class="mi">30301</span> <span class="o">-</span><span class="n">verbosity</span> <span class="mi">5</span> <span class="o">--</span><span class="n">pprof</span> <span class="o">--</span><span class="n">pprof</span><span class="o">.</span><span class="n">port</span> <span class="mi">6061</span> <span class="mi">2</span><span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="mf">01.</span><span class="n">glog</span>
<span class="n">geth</span> <span class="o">-</span><span class="n">port</span><span class="o">=</span><span class="mi">30302</span> <span class="o">-</span><span class="n">verbosity</span> <span class="mi">5</span> <span class="o">--</span><span class="n">pprof</span> <span class="o">--</span><span class="n">pprof</span><span class="o">.</span><span class="n">port</span> <span class="mi">6062</span> <span class="mi">2</span><span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="mf">02.</span><span class="n">glog</span>
</pre></div>
</div>
<p>Alternatively if you want to kill the clients (in case they hang or stalled syncing, etc)
and have the stacktrace too, you can use the <code class="docutils literal notranslate"><span class="pre">-QUIT</span></code> signal with <code class="docutils literal notranslate"><span class="pre">kill</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">killall</span> <span class="o">-</span><span class="n">QUIT</span> <span class="n">geth</span>
</pre></div>
</div>
<p>This will dump stack traces for each instance to their respective log file.</p>
</div>
</div>
</div>


              </div>
              
              
          </main>
          

      </div>
    </div>

    
  <script src="../_static/js/index.d3f166471bb80abb5163.js"></script>


    
    <!-- Google Analytics -->
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-132858178-7', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
    <!-- End Google Analytics -->
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2018-2021, Quadrans Foundation.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.4.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>